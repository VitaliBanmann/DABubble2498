<nav class="sidebar">
  <div class="sidebar-header">
    <h2>Channels</h2>
    <button class="add-button" title="Neuer Channel">+</button>
  </div>

  <div class="channels-section">
    <div *ngIf="isLoadingChannels" class="loading">Channels laden...</div>
    <button
      *ngFor="let channel of channels"
      (click)="selectChannel(channel.id!)"
      [class.selected]="selectedChannelId === channel.id"
      class="channel-item"
      [title]="channel.description"
    >
      <span class="channel-icon">#</span>
      <span class="channel-name">{{ channel.name }}</span>
    </button>
  </div>

  <hr class="divider" />

  <div class="sidebar-header">
    <h2>Direktnachrichten</h2>
    <button class="add-button" title="Neue Direktnachricht">+</button>
  </div>

  <div class="dms-section">
    <div *ngIf="isLoadingDMs" class="loading">DMs laden...</div>
    <button
      *ngFor="let user of directMessages"
      (click)="selectDirectMessage(user.id!)"
      [class.selected]="selectedChannelId === `dm-${user.id}`"
      class="dm-item"
    >
      <img
        *ngIf="user.avatar"
        [src]="user.avatar"
        [alt]="user.displayName || 'User'"
        class="dm-avatar"
      />
      <span *ngIf="!user.avatar" class="dm-avatar-placeholder">
        {{ ((user.displayName || 'U')?.charAt(0) || 'U').toUpperCase() }}
      </span>
      <span class="dm-name">{{ user.displayName }}</span>
    </button>
  </div>
</nav>
